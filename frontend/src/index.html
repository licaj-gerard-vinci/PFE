<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Frontend</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  
  <script>
    function updateLoginButton() {
      const isLoggedIn = window.isLoggedIn && window.isLoggedIn();
      const currentPath = window.location.pathname;

      if (currentPath !== '/login' || currentPath !== '/register') {
        const button = document.getElementById('auth-button');
        if (button) {
          button.style.display = 'none';
        }
        return;
      }

      // Add onboarding button
      let onboardingButton = document.getElementById('onboarding-button');
      if (!onboardingButton) {
        onboardingButton = document.createElement('a');
        onboardingButton.id = 'onboarding-button';
        onboardingButton.className = 'onboarding-button';
        onboardingButton.textContent = 'Onboarding';
        onboardingButton.href = '/onboarding';
        document.getElementById('navbar-left').appendChild(onboardingButton);
      }
      onboardingButton.style.display = 'block';

      // Add formulaire button
      let formulaireButton = document.getElementById('formulaire-button');
      if (!formulaireButton) {
        formulaireButton = document.createElement('a');
        formulaireButton.id = 'formulaire-button';
        formulaireButton.className = 'formulaire-button';
        formulaireButton.textContent = 'Formulaire';
        formulaireButton.href = '/formulaire';
        document.getElementById('navbar-left').appendChild(formulaireButton);
      }
      formulaireButton.style.display = 'block';

      // Add dashboard button
      let dashboardButton = document.getElementById('dashboard-button');
      if (!dashboardButton) {
        dashboardButton = document.createElement('a');
        dashboardButton.id = 'dashboard-button';
        dashboardButton.className = 'dashboard-button';
        dashboardButton.textContent = 'Dashboard';
        dashboardButton.href = '/dashboard';
        document.getElementById('navbar-right').appendChild(dashboardButton);
      }
      dashboardButton.style.display = 'block';

      let button = document.getElementById('auth-button');
      if (!button) {
        button = document.createElement('a');
        button.id = 'auth-button';
        button.className = 'auth-button';
        document.getElementById('navbar-right').appendChild(button);
      }

      if (isLoggedIn) {
        button.textContent = 'Se dÃ©connecter';
        button.onclick = () => window.logout && window.logout();
        button.href = 'javascript:void(0);';
        button.style.display = 'block';
      } else {
        button.textContent = 'Se connecter';
        button.href = '/login';
        button.onclick = null;
        button.style.display = 'block';
      }
    }

    function waitForAngular() {
      if (window.isLoggedIn) {
        updateLoginButton();
      } else {
        setTimeout(waitForAngular, 100);
      }
    }

    document.addEventListener('DOMContentLoaded', waitForAngular);
  </script>
</head>
<body class="mat-typography">
  <div id="navbar" class="navbar">
    <div id="navbar-left" class="navbar-left"></div>
    <div id="navbar-right" class="navbar-right"></div>
  </div>
  <app-root></app-root>
</body>
</html>